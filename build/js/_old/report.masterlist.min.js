$(function(){var c=$("#frm_sdispense"),a=$("#dt_report");c.formValidation({framework:"bootstrap",button:{selector:"#btn_search",disabled:"disabled"},icon:null,}).on("success.form.fv",function(k){k.preventDefault();var g=$(k.target),j=g.data("formValidation");var h=base_url+"report/ajax_get_report",i=c.serializeObject();f(h,i);g.data("formValidation").disableSubmitButtons(false);return false});function f(g,j){notify("Processing","Please wait..","info",999999);$("#print-report strong.title").text($("#tr_format option:selected").text());$("#print-report .heading p:eq(0) span").text($("#tr_location").val());$("#print-report .heading p:eq(1) span").text($("#tr_funding").val());$("#print-report .heading p:eq(2) span").text($("#tr_program").val());$("#print-report .heading p:eq(3) span:eq(0)").text($("#start").val());$("#print-report .heading p:eq(3) span:eq(1)").text($("#end").val());$("#print-report, ._print").removeClass("hidden");var i=$("#tr_format").val();a.dataTable().fnClearTable();a.dataTable().fnDestroy();var h=a.DataTable({ajax:{type:"GET",url:g,data:j,dataSrc:""},columns:[{data:function(k){return k.m_name+" ["+k.m_pcsper_set+"]s"}},{data:"tr_funding"},{data:"tr_location"},{data:"m_therapeutic_use"},{data:"m_dosage_form"},{data:"tr_date"},{data:function(k){return k.pcsper_set_x_qty+" PCS"}},{data:function(k){return b(k.box,k.m_set)+" "+d(k.box,k.pcs)}}],dom:'<"wrapper"fit>',bFilter:false,info:false,scrollY:400,scrollX:true,paging:false,scrollCollapse:true,buttons:["copy","csv","excel","pdf","print"],columnDefs:[{visible:false,targets:[1,2,3,4,5]}],order:[[e(i),"asc"]],drawCallback:function(l){var k=this.api();var n=k.rows({page:"current"}).nodes();var m=null;k.column(e(i),{page:"current"}).data().each(function(p,o){if(m!==p){$(n).eq(o).before('<tr class="group"><td colspan="7">'+p+"</td></tr>");m=p}})},fnInitComplete:function(l,k){$(".alert-info .glyphicon-remove").trigger("click")}})}$("body").delegate("#btn_cancel","click",function(){c.data("formValidation").resetForm();c[0].reset();$("#print-report, ._print").addClass("hidden")});function d(i,j){var g="",h="";if(i>0){h="and"}if(j>1){g=h+" "+j+" PCS"}else{if(j>0){g=h+" "+j+" PC"}}return g}function b(i,h){var g="";if(i>1){g=i+" "+h+"ES"}else{if(i>0){g=i+" "+h}}return g}function e(h){var g=4;if(h==0||h=="a"){g=4}else{if(h==1||h=="b"){g=3}}return g}$.fn.serializeObject=function(){var h={};var g=this.serializeArray();$.each(g,function(){if(h[this.name]){if(!h[this.name].push){h[this.name]=[h[this.name]]}h[this.name].push(this.value||"")}else{h[this.name]=this.value||""}});return h}});