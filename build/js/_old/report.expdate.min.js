$(function(){$("#frm-expreport").formValidation({framework:"bootstrap",button:{selector:"#btn_search",disabled:"disabled"},icon:null,}).on("success.form.fv",function(j){j.preventDefault();var f=$(j.target),i=f.data("formValidation");var g=base_url+"report/ajax_get_exp_report",h=$("#frm-expreport").serializeObject();d(g,h);f.data("formValidation").disableSubmitButtons(false);return false});function d(e,i){notify("Processing","Please wait..","info",999999);$("#print-report .heading p:eq(0) span").text($("#tr_location").val());$("#print-report .heading p:eq(1) span").text($("#tr_funding").val());$("#print-report .heading p:eq(2) span").text($("#tr_program").val());$("#print-report .heading p:eq(3) span:eq(0)").text($("#start").val());$("#print-report .heading p:eq(3) span:eq(1)").text($("#end").val());$("#print-report, ._print").removeClass("hidden");var h=$("#tr_format").val();$("#dt_expreport").dataTable().fnClearTable();$("#dt_expreport").dataTable().fnDestroy();var g=$("#dt_expreport").DataTable({ajax:{type:"GET",url:e,data:i,dataSrc:""},columns:[{data:function(f){return f.m_name+" ["+f.m_pcsper_set+"]s"}},{data:"tr_lot_no"},{data:function(f){return'<font color="'+f.remarks+'">'+f.tr_expiration_date+"</font>"}},{data:function(f){return f.pcsper_set_x_qty+" PCS"}},{data:function(f){return a(f.box,f.m_set)+" "+b(f.box,f.pcs)}}],dom:'<"wrapper"fit>',bFilter:false,ordering:false,info:false,scrollX:true,paging:false,scrollY:280,scrollCollapse:true,buttons:["copy","csv","excel","pdf","print"],columnDefs:[],drawCallback:function(j){var f=this.api();var l=f.rows({page:"current"}).nodes();var k=null;f.column(0,{page:"current"}).data().each(function(n,m){if(k!==n){$(l).eq(m).before('<tr class="group"><td colspan="7">'+n+"</td></tr>");k=n}})},fnInitComplete:function(j,f){$(".alert-info .glyphicon-remove").trigger("click");$("tbody tr.odd td:nth-of-type(1), tbody tr.even td:nth-of-type(1)").text("")}})}$("body").delegate("#btn_ecancel","click",function(){$("#frm-expreport").data("formValidation").resetForm();$("#frm-expreport")[0].reset();$("#print-report, ._print").addClass("hidden")});function b(g,h){var e="",f="";if(g>0){f="and"}if(h>1){e=f+" "+h+" PCS"}else{if(h>0){e=f+" "+h+" PC"}}return e}function a(g,f){var e="";if(g>1){e=g+" "+f+"ES"}else{if(g>0){e=g+" "+f}}return e}function c(f){var e=4;if(f==0||f=="a"){e=4}else{if(f==1||f=="b"){e=3}}return e}$.fn.serializeObject=function(){var f={};var e=this.serializeArray();$.each(e,function(){if(f[this.name]){if(!f[this.name].push){f[this.name]=[f[this.name]]}f[this.name].push(this.value||"")}else{f[this.name]=this.value||""}});return f}});